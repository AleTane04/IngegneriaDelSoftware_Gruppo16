@startuml

skinparam packageStyle rectangle
skinparam usecase {
    BackgroundColor White
    BorderColor DarkBlue
    ArrowColor DarkBlue
}
skinparam actor {
    BackgroundColor White
    BorderColor Black
}


left to right direction

actor "Amministratore\n(Bibliotecario)" as Admin

package "Gestione di una Biblioteca" {

    ' --- AREA SICUREZZA ---
    usecase "UC-01: Autenticazione (Login)" as UC01

    ' --- AREA CATALOGO LIBRI ---
    
        usecase "UC-02: Inserimento Nuovo Libro" as UC02
        usecase "UC-03: Modifica Dati Libro" as UC03
        usecase "UC-04: Rimozione Libro" as UC04
        usecase "UC-05: Ricerca e Visualizza Libri" as UC05
    

    ' --- AREA UTENTI ---
    
        usecase "UC-06: Inserimento Nuovo Utente" as UC06
        usecase "UC-07: Modifica Dati Utente" as UC07
        usecase "UC-08: Rimozione Utente" as UC08
        usecase "UC-09: Ricerca e Visualizza Utenti" as UC09
    

    ' --- AREA PRESTITI ---
    
        usecase "UC-10: Registrazione Prestito\n(Check-out)" as UC10
        usecase "UC-11: Restituzione Libro\n(Check-in)" as UC11
        usecase "UC-12: Monitoraggio Prestiti Attivi" as UC12
    

    ' --- USE CASE DI SUPPORTO (VINCOLI) ---
    
    usecase "Verifica Vincoli Prestito" as CheckLoanRules
    usecase "Verifica Vincoli Rimozione" as CheckDeleteRules

    ' --- ASSOCIAZIONI (LINEE SOLIDE SENZA FRECCE) ---
    
    
    Admin -- UC01
    Admin -- UC02
    Admin -- UC03
    Admin -- UC04
    Admin -- UC05
    Admin -- UC06
    Admin -- UC07
    Admin -- UC08
    Admin -- UC09
    Admin -- UC10
    Admin -- UC11
    Admin -- UC12

    ' --- RELAZIONI INCLUDE (FRECCE TRATTEGGIATE) ---
    ' A include B: la freccia parte da A e va verso B (Come da tua slide "image_88a7ec")
    
    ' Il prestito INCLUDE sempre la verifica delle regole (copie > 0, max 3 libri)
    UC10 ..> CheckLoanRules : <<include>>

    ' La rimozione libro INCLUDE sempre la verifica che non sia in prestito
    UC04 ..> CheckDeleteRules : <<include>>

    ' La rimozione utente INCLUDE sempre la verifica che non abbia libri
    UC08 ..> CheckDeleteRules : <<include>>
}

@enduml